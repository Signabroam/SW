<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Signabroam - Radio Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 90vh;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 30px;
      border-bottom: 3px solid #5568d3;
    }

    header h1 {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .toolbar {
      background: #f8f9fa;
      padding: 15px 30px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    select {
      padding: 10px 15px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      background: white;
      cursor: pointer;
      flex: 1;
      min-width: 200px;
      transition: border-color 0.3s;
    }

    select:hover,
    select:focus {
      border-color: #667eea;
      outline: none;
    }

    .controls {
      display: flex;
      gap: 8px;
    }

    button {
      padding: 10px 15px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s;
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .content {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .iframe-container {
      width: 100%;
      flex: 1;
      border: none;
      overflow: hidden;
    }

    .iframe-container iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .chatbox-section {
      background: #f8f9fa;
      border-top: 1px solid #e0e0e0;
      padding: 20px 30px;
      max-height: 300px;
      overflow-y: auto;
    }

    .chatbox-section h3 {
      margin-bottom: 15px;
      color: #333;
      font-size: 16px;
    }

    #message {
      background: white;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 15px;
      max-height: 120px;
      overflow-y: auto;
      min-height: 40px;
      font-size: 13px;
    }

    .message-item {
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .message-item:last-child {
      border-bottom: none;
    }

    .message-callsign {
      font-weight: 700;
      color: #667eea;
      margin-right: 8px;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .input-group input {
      flex: 1;
      padding: 10px 12px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      transition: border-color 0.3s;
    }

    .input-group input:focus {
      outline: none;
      border-color: #667eea;
    }

    #send-button {
      padding: 10px 20px;
      min-width: 100px;
    }

    .alert {
      background: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 12px 15px;
      border-radius: 6px;
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
    }

    .closebtn {
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      color: #ffc107;
    }

    .closebtn:hover {
      color: #d39e00;
    }

    @media (max-width: 768px) {
      .toolbar {
        flex-direction: column;
      }

      select {
        min-width: unset;
      }

      .controls {
        width: 100%;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üåç Signabroam</h1>
    </header>

    <div class="toolbar">
      <select id="siteSelector" onchange="changeIframeURL()">
        <option value="about:blank">-- S√©lectionner un SDR --</option>
        <option value="" disabled>‚ñ∏ WebSDR</option>
        <option value="http://websdr.ewi.utwente.nl:8901/">uTwente SDR</option>
        <option value="http://websdr.78dx.ru:8901/">Saint-Petersburg SDR</option>
        <option value="" disabled>‚ñ∏ KiwiSDR</option>
        <option value="http://kiwi-kuo.aprs.fi:8073/">Kuopio aprs.fi</option>
        <option value="http://81.166.116.237:8073/">Tjelta Norway</option>
        <option value="https://khv.swl.su/">RussiaSWL</option>
        <option value="http://fsdr.duckdns.org/">DuckDNS Hungary</option>
        <option value="http://oh3aa.dy.fi:18073/">OH3AA (Finland)</option>
        <option value="http://kiwi-vih.aprs.fi:8073/">Vihti (Finland)</option>
        <option value="http://188.162.63.103:8073/">Russia (Very good for SW)</option>
        <option value="" disabled>‚ñ∏ OpenWebrx</option>
        <option value="https://2.websdr.jestok.com/">SR4DON (Poland)</option>
        <option value="http://jimjackii.no-ip.org/owrx/">EDDC2 (Germany)</option>
        <option value="https://vadelma.icu/">Vadelma (Finland)</option>
        <option value="http://noradio86.ddns.net:8074/">noradio86 (France)</option>
        <option value="" disabled>‚ñ∏ Mappers</option>
        <option value="http://rx.linkfanel.net/">WebSDR Mapper</option>
        <option value="https://www.receiverbook.de/map">OpenWebRX Map</option>
        <option value="https://www.receiverbook.de/">ReceiverBook</option>
      </select>

      <div class="controls">
        <button onclick="zoomIn()">üîç+</button>
        <button onclick="zoomOut()">üîç‚àí</button>
        <button onclick="refreshIframe()">üîÑ Refresh</button>
        <button onclick="goBack()">‚Üê Back</button>
        <button onclick="goForward()">Forward ‚Üí</button>
      </div>
    </div>

    <div class="content">
      <div class="iframe-container">
        <iframe id="myIframe" src="about:blank"></iframe>
      </div>
    </div>

    <div class="chatbox-section">
      <h3>üí¨ Chat en Direct</h3>
      
      <div class="alert">
        <span>‚ö†Ô∏è Attention : Version Firebase d√©pr√©ci√©e</span>
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      </div>

      <div id="message"></div>

      <div class="input-group">
        <input type="text" id="callsign-input" placeholder="Votre callsign...">
        <input type="text" id="message-input" placeholder="Votre message...">
        <button id="send-button">Envoyer</button>
      </div>
    </div>
  </div>

  <script>
    let zoomLevel = 1;
    const iframe = document.getElementById('myIframe');
    const siteSelector = document.getElementById('siteSelector');

    // Charger l'iframe
    function changeIframeURL() {
      const selectedValue = siteSelector.value;
      if (selectedValue && selectedValue !== 'about:blank') {
        iframe.src = selectedValue;
        zoomLevel = 1;
      } else {
        iframe.src = 'about:blank';
      }
    }

    // Zoom in
    function zoomIn() {
      zoomLevel += 0.1;
      applyZoom();
    }

    // Zoom out
    function zoomOut() {
      if (zoomLevel > 0.2) {
        zoomLevel -= 0.1;
        applyZoom();
      }
    }

    // Appliquer le zoom
    function applyZoom() {
      iframe.style.transform = `scale(${zoomLevel})`;
      iframe.style.transformOrigin = '0 0';
      iframe.style.width = `${100 / zoomLevel}%`;
      iframe.style.height = `${100 / zoomLevel}%`;
    }

    // Rafra√Æchir l'iframe
    function refreshIframe() {
      iframe.src = iframe.src;
    }

    // Boutons de navigation
    function goBack() {
      window.history.back();
    }

    function goForward() {
      window.history.forward();
    }

    // Chat (simple demo sans Firebase)
    const sendButton = document.getElementById('send-button');
    const messageInput = document.getElementById('message-input');
    const callsignInput = document.getElementById('callsign-input');
    const messagesDiv = document.getElementById('message');

    sendButton.addEventListener('click', () => {
      const message = messageInput.value.trim();
      const callsign = callsignInput.value.trim();

      if (message && callsign) {
        const messageItem = document.createElement('div');
        messageItem.className = 'message-item';
        messageItem.innerHTML = `<span class="message-callsign">${callsign}:</span> ${message}`;
        messagesDiv.appendChild(messageItem);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;

        messageInput.value = '';
      } else {
        alert('Veuillez entrer un callsign et un message.');
      }
    });

    // Envoyer avec Entr√©e
    messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendButton.click();
    });
  </script>
</body>
</html>
